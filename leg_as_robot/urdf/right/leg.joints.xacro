<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">


  <xacro:macro name="define_leg_joints" params="leg_id:=right">
    <joint name="${leg_id}_leg_hip_adduction" type="revolute">
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <parent link="${leg_id}_leg_hip_base_link"/>
      <child link="${leg_id}_leg_hip_adduction_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-44)}" upper="${radians(30)}"/>
      <axis xyz="0 0 1"/> 
    </joint>

    <joint name="${leg_id}_leg_hip_extension" type="revolute">
      <origin xyz="0 0 0" rpy="${pi/2} 0 ${pi/2}"/>
      <parent link="${leg_id}_leg_hip_adduction_link"/>
      <child link="${leg_id}_leg_hip_extension_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-30)}" upper="${radians(32)}"/>
      <axis xyz="0 0 1"/> 
    </joint>

    <joint name="${leg_id}_leg_hip_roll" type="revolute">
      <origin xyz="0 0 0" rpy="${pi/2} 0 ${pi/2}"/>
      <parent link="${leg_id}_leg_hip_extension_link"/>
      <child link="${leg_id}_leg_hip_roll_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-45)}" upper="${radians(45)}"/>
      <axis xyz="0 0 1"/> 
    </joint>

    <joint name="${leg_id}_leg_knee_extension" type="revolute">
      <origin xyz="0 0 ${d3_leg}" rpy="${-pi/2} 0 ${pi}"/> 
      <parent link="${leg_id}_leg_hip_roll_link"/>
      <child link="${leg_id}_leg_knee_extension_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-90)}" upper="${radians(30)}"/>
      <axis xyz="0 0 1"/> 
    </joint>


    <joint name="${leg_id}_leg_ankle_pitch" type="revolute">
      <origin xyz="${r4_leg} 0 0" rpy="${pi} 0 ${pi}"/>
      <parent link="${leg_id}_leg_knee_extension_link"/>
      <child link="${leg_id}_leg_ankle_pitch_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-45.8)}" upper="${radians(29.8)}"/>
      <axis xyz="0 0 1"/> 
    </joint>

    <joint name="${leg_id}_leg_ankle_roll" type="revolute">
      <origin xyz="0 0 0" rpy="${pi/2} 0 0"/> 
      <parent link="${leg_id}_leg_ankle_pitch_link"/>
      <child link="${leg_id}_leg_ankle_roll_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-17)}" upper="${radians(22)}"/>
      <axis xyz="0 0 1"/> 
    </joint>

    <joint name="${leg_id}_leg_ankle_yaw" type="revolute">
      <origin xyz="0 0 0" rpy="${-pi/2} 0 ${-pi/2}"/> 
      <parent link="${leg_id}_leg_ankle_roll_link"/>
      <child link="${leg_id}_leg_ankle_yaw_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-25.9)}" upper="${radians(36)}"/>
      <axis xyz="0 0 1"/> 
    </joint>

     <!-- <joint name="${leg_id}_leg_ankle_yaw" type="revolute">
      <origin xyz="0 0 0" rpy="${-pi/2} 0 ${-pi/2}"/> 
      <parent link="${leg_id}_leg_ankle_roll_link"/>
      <child link="${leg_id}_leg_ankle_yaw_link"/>
      <limit effort="30" velocity="10.0" lower="${radians(-5)}" upper="${radians(10)}"/>
      <axis xyz="0 0 1"/> 
    </joint> -->

      <joint name="${leg_id}_leg_fixed_foot_base" type="fixed">
          <origin xyz="0 ${-r7_leg} ${-d7_leg}" rpy="0 0 ${-pi/2}"/> 
          <parent link="${leg_id}_leg_ankle_yaw_link"/>
          <child link="${leg_id}_leg_foot_base"/>
      </joint>

      <joint name="${leg_id}_leg_fixed_foot_tip" type="fixed">
          <origin xyz="${r8_leg} 0 0" rpy="0 0 0"/> 
          <parent link="${leg_id}_leg_foot_base"/>
          <child link="${leg_id}_leg_foot_tip"/>
      </joint>
      
      <joint name="${leg_id}_leg_fixed_pedal_tip" type="fixed">
          <origin xyz="${r8_leg_extra} 0 0" rpy="0 0 0"/> 
          <parent link="${leg_id}_leg_foot_tip"/>
          <child link="${leg_id}_leg_virtual_pedal_tip"/>
      </joint>
  </xacro:macro>
</robot>